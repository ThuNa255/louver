## Rewrite all requests to /public/ when the requested file/dir doesn't exist
## This allows keeping PHP files inside the `public/` folder while using
## root URLs like /login.php.
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # If the request maps to an existing file or directory, serve it directly
  RewriteCond %{REQUEST_FILENAME} -f [OR]
  RewriteCond %{REQUEST_FILENAME} -d
  RewriteRule ^ - [L]

  # If the request already targets the public/ folder, do nothing
  RewriteRule ^public/ - [L]

  # Internally rewrite everything else to public/<requested-path>
  RewriteRule ^(.*)$ public/$1 [L]
</IfModule>

# Fallback DirectoryIndex (optional)
DirectoryIndex public/index.php index.php
